<!doctype html>
<html ⚡>
  <head>
    <meta charset="utf-8">
    <link rel="canonical" href="https://jmperezperez.com/es/svg-placeholders/" >
    <title>Usando SVG como placeholders — Más técnicas de carga de imágenes - Web development, performance, and some other good practices.</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style>
		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:title" content="Usando SVG como placeholders — Más técnicas de carga de imágenes - José M. Pérez" property="og:title">
		<meta name="twitter:description" content="Optimización del rendimiento web utilizando carga diferida de imágenes con SVGs como placeholders, representando contornos, formas y siluetas." property="og:description">
		<meta name="twitter:site" content="@jmperezperez">
		
		<meta property="og:image" content="https://jmperezperez.com/assets/images/posts/svg-placeholders/jmperez-composition-primitive.jpg">
		<meta name="twitter:image" content="https://jmperezperez.com/assets/images/posts/svg-placeholders/jmperez-composition-primitive.jpg">
		
    <noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    
    <script async custom-element="amp-video" src="https://cdn.ampproject.org/v0/amp-video-0.1.js"></script>
    
    <script async custom-element="amp-twitter" src="https://cdn.ampproject.org/v0/amp-twitter-0.1.js"></script>
		
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
    
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    

    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script type="application/ld+json">
		{
			"@context": "http://schema.org",
			"@type": "BlogPosting",
			"headline": "Usando SVG como placeholders — Más técnicas de carga de imágenes",
			
			"description": "Optimización del rendimiento web utilizando carga diferida de imágenes con SVGs como placeholders, representando contornos, formas y siluetas.",
			
			"mainEntityOfPage":{
			    "@type":"WebPage",
			    "@id":"es/svg-placeholders/"
			},
			"datePublished": "2017-10-29T21:30:00.000Z",
			"dateModified": "2018-12-16T17:51:46.000Z",
			
			"image": {
				"@type": "ImageObject",
				"url": "https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1509278557/jmperez-composition-primitive_j8zyfn.jpg",
				"width" : "700",
				"height" : "351"
			},
			
			"author": {
			    "@type": "Person",
			    "name": "Jose M. Perez"
			},
			"publisher": {
			    "@type": "Organization",
			    "name": "Jose M. Perez&#39;s Blog"
			    
			    ,
			    "logo": {
			      "@type": "ImageObject",
			      "url": "https://jmperezperez.com/amp-dist/logo.png",
			      "width": 600,
			      "height": 60
			    }
			    
			}
		}
	</script>
	<style amp-custom>
		
			/*--RESET--*/
* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: none;
  font: inherit;
  margin: 0;
  padding: 0;
  vertical-align: baseline;
}

input,
button {
  background: none;
}

html {
  font-size: 18px;
}

@media (max-width: 768px) {
  html {
    font-size: 16px;
  }
}

/*--BODY--*/

body {
  background: #fff;
  color: #555;
  font-family: Georgia, Times;
  font-weight: 300;
  font-style: normal;
  line-height: 1.5rem;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-text-size-adjust: 100%; /* fixes a too large font issue in horizontally scrollable <pre> on webkit */
}

h1,
h2,
h3,
h4,
h5 {
  color: #212121;
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-weight: 600;
  line-height: 2rem;
  margin-bottom: 1.5rem;
}

#menu a,
.button {
  font-size: 1em;
  font-weight: 400;
}

p,
.post ul,
.post ol,
iframe,
video,
amp-video,
amp-vimeo,
amp-youtube {
  margin: 0;
  margin-bottom: 1rem;
}

twitterwidget {
  margin-bottom: 1em ;
}

a {
  color: #2a7cb2;
  font-weight: inherit;
  text-decoration: none;
  transition: color 0.15s ease-out, border-bottom-color 0.15s ease-out;
}

a:hover {
  color: #2a7cb2;
}

abbr {
  border-bottom: 1px dashed #ccc;
  text-decoration: none;
}

p a {
  border-bottom: 1px solid #eee;
}

p a:hover {
  border-bottom-color: #212121;
}

strong {
  font-weight: bold;
}

em {
  font-style: italic;
}

h1 {
  font-size: 1.7rem;
}

h2 {
  color: #444;
  display: inline-block;
  font-size: 1.6rem;
  font-weight: 400;
  margin-top: 1rem;
}

h3 {
  color: #666;
  display: inline-block;
  font-size: 1.4rem;
  font-weight: 400;
  margin-top: 1rem;
}

h4 {
  font-size: 1.18rem;
}

h5 {
  font-size: 1rem;
}

a h1,
a h2,
a h3,
a h4,
a h5 {
  transition: color 0.15s ease-out;
}

a:hover h1,
a:hover h2,
a:hover h3,
a:hover h4,
a:hover h5 {
  color: #3498db;
}

.quote {
  margin: 0 0 15px 0;
}

blockquote {
  border-left: 2px solid #ccc;
  font-style: italic;
  margin: 0 0 15px 0;
  padding-left: 20px;
}

ul,
ol {
  margin: 0 0 15px 0;
  padding-left: 25px;
}

ul {
  list-style: square;
}

ol {
  list-style: decimal;
}

hr {
  background: #eee;
  color: #eee;
  clear: both;
  display: block;
  height: 2px;
  margin: 30px auto;
  width: 50%;
}

pre,
code {
  color: #333;
  font-family: Courier, Menlo, Monaco;
  font-size: 0.8em;
  letter-spacing: 0px;
  overflow-x: auto;
}

pre {
  padding: 0.8em 1em;
  white-space: pre-wrap;
}

code {
  margin: 0;
}

/*--CLEARFIXES--*/

.post::after {
  display: block;
  clear: both;
  content: '';
}

/*--HEADER--*/

.main-header {
  background-color: #005689;
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  overflow: hidden;
  margin-bottom: 1.5rem;
  padding: 1rem;
  position: relative;
  text-align: center;
  width: 100%;
}

/*--MENU--*/

#menu {
  display: inline-block;
  line-height: 2rem;
}

#menu a {
  color: #fff;
  font-size: 0.9rem;
  margin-left: 1rem;
  padding: 1rem 0.5rem;
  text-transform: uppercase;
}

@media (max-width: 500px) {
  #menu a {
    margin-left: 0.5rem;
    padding: 0.5rem 0.25rem;
  }
}

#menu a:first-child {
  margin-left: 0;
}

#menu a[aria-current] {
  font-weight: bold;
}

/*--PAGE--*/

#page {
  margin: 0 auto;
  max-width: 41rem;
  padding-left: 1.5rem;
  padding-right: 1.5rem;
  position: relative;
}

.videoWrapper {
  height: 0;
  margin-bottom: 1em;
  padding-bottom: 56.25%; /* 16:9 */
  padding-top: 25px;
  position: relative;
}

.videoWrapper iframe,
.videoWrapper amp-youtube {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

/*--WRAPPER--*/

.wrapper {
  border-top: 2px solid #eee;
  padding-top: 2rem;
}

.wrapper:first-child {
  border-top: none;
  padding-top: 1rem;
}

.posts-list h2 {
  margin-top: 0;
}

/*--POSTS--*/

.post {
  display: block;
  margin-bottom: 2rem;
  width: 100%;
}

.post div[itemprop='articleBody'] > p:first-child {
  color: #333;
}

.post li {
  margin-bottom: 0.5rem;
}

.post p + img {
  margin-bottom: 1rem;
}

.post p img {
  border: 1px solid #eee;
  display: block;
  max-width: 100%;
}

.post img + .caption {
  padding-top: 0.5rem;
}

.post .svg-container {
  margin-bottom: 5%;
  max-width: 100%;
  text-align: center;
}

video {
  height: auto;
  max-width: 100%;
}

.post .svg-container object {
  width: 100%;
}

.tag-list {
  display: inline-block;
  list-style-type: none;
  margin: 0;
  padding: 0;
  padding-bottom: 1rem;
}

.tag-list-item {
  display: inline-block;
  margin-left: 0.8em;
}

/*--PAGINATION--*/

.pagination {
  padding-bottom: 1rem;
  text-align: center;
}

.pagination a {
  min-width: 30px;
  max-height: 30px;
  text-align: center;
}

/*--FOOTER--*/

footer {
  border-top: 1px dashed #ddd;
  padding: 2em;
  text-align: center;
}

.timing-stats {
  font-size: 0.7em;
  padding: 0.35em;
}

/*--BUTTONS--*/

.button {
  background-color: #fff;
  border: 1px solid #555;
  border-radius: 2rem;
  color: #555;
  display: inline-block;
  padding: 0.5rem 1rem;
  transition: background-color 0.15s ease-out;
}

.button:hover {
  background-color: #3498db;
  border-color: transparent;
  color: #fff;
}

.button.inactive {
  background-color: #ccc;
  color: #fff;
}

/*--404--*/
.search-goog input {
  border: 2px solid #ddd;
  padding: 10px;
}

.search-goog input[type='submit'] {
  background-color: #ddd;
  cursor: pointer;
}

@media (max-width: 768px) {
  /*--PAGE--*/

  #page,
  .wrapper {
    margin: 0;
    max-width: 100%;
    width: 100%;
  }

  /*--WRAPPER--*/

  .wrapper {
    padding-top: 2rem;
  }

  .wraper::after {
    clear: both;
    content: '';
    display: block;
  }
}

/*--ACCESSIBILITY--*/
.outscreen {
  height: 1px;
  left: -1000px;
  overflow: hidden;
  position: absolute;
  top: auto;
  width: 1px;
}

/*--CALLOUT--*/
.callout {
  border: 1px solid #eee;
  border-left-color: #777;
  border-left-width: 5px;
  border-radius: 3px;
  font-size: .9rem;
  padding: 20px;
  margin: 20px 0;
}

.author {
  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  font-size: 0.8rem;
  margin-bottom: 1rem;
}

.author .name {
  line-height: 1rem;
  padding-top: 0.5rem;
}

.media,
.bd {
  overflow: hidden;
  _overflow: visible;
  
}

.media .img {
  float: left;
}

.avatar-img {
  border-radius: 100%;
  height: 3rem;
  margin-right: 0.5rem;
  width: 3rem;
}

/* SYNTAX HIGHLIGHTING */

code[class*='language-'],
pre[class*='language-'] {
  color: #393a34;
  font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier,
    monospace;
  direction: ltr;
  text-align: left;
  white-space: pre-wrap;
  word-spacing: normal;
  word-break: normal;
  font-size: 0.85em;
  line-height: 1.2em;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

pre[class*='language-']::-moz-selection,
pre[class*='language-'] ::-moz-selection,
code[class*='language-']::-moz-selection,
code[class*='language-'] ::-moz-selection {
  background: #b3d4fc;
}

pre[class*='language-']::selection,
pre[class*='language-'] ::selection,
code[class*='language-']::selection,
code[class*='language-'] ::selection {
  background: #b3d4fc;
}

/* Code blocks */
pre[class*='language-'] {
  padding: 1em;
  margin: 0.5em 0;
  overflow: auto;
  border: 1px solid #dddddd;
  background-color: white;
}

:not(pre) > code[class*='language-'],
pre[class*='language-'] {
}

/* Inline code */
:not(pre) > code[class*='language-'] {
  padding: 0.2em;
  padding-top: 1px;
  padding-bottom: 1px;
  background: #f8f8f8;
  border: 1px solid #dddddd;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: #999988;
  font-style: italic;
}

.token.namespace {
  opacity: 0.7;
}

.token.string,
.token.attr-value {
  color: #e3116c;
}
.token.punctuation,
.token.operator {
  color: #393a34; /* no highlight */
}

.token.entity,
.token.url,
.token.symbol,
.token.number,
.token.boolean,
.token.variable,
.token.constant,
.token.property,
.token.regex,
.token.inserted {
  color: #005cc5;
}

.token.keyword {
  color: #d73a49;
}

.token.atrule,
.token.attr-name {
  color: #6f42c1;
}

.token.function,
.token.deleted {
  color: #6f42c1;
}

.token.selector {
  color: #00009f;
}

.token.tag {
  color: #22863a;
}

.token.class-name {
  color: #6f42c1;
}

.token.important,
.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}

.caption {
  display: block;
  font-size: 0.8rem;
  text-align: center;
}

.codepen-aspect-ratio > iframe {
  height: 100%;
  position: absolute;
  width: 100%;
}

.twitter-tweet {
  margin-left: auto;
  margin-right: auto;
}

.twitter-tweet::after {
  content: '';
  display: block;
  padding-bottom: 20px;
  width: 100%;
}

.me {
  max-width: 22rem;
  margin: 0 auto 1rem;
  text-align: center;
}

.me > div {
  height: 8rem;
  margin: 0 auto;
  position: relative;
  width: 8rem;
}

.me svg {
  border-radius: 100%;
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.me img {
  border-radius: 100%;
  height: 100%;
  position: relative;
  width: 100%;
}

.me h1 {
  font-size: 1.7rem;
  line-height: 2rem;
  margin-bottom: 0.5rem;
}

@media (prefers-color-scheme: dark) {
  body {
    background: #38444c;
    color: #eee;
  }
  a {
    color: #9dcae8;
  }
  a:hover {
    color: #fff;
  }
  p a {
    border-bottom: 1px solid #6d7a82;
  }
  p a:hover {
    border-bottom: 1px solid #fff;
  }
  h1,
  h2,
  h3,
  h4,
  h5 {
    color: #eee;
  }
  a:hover h1,
  a:hover h2,
  a:hover h3,
  a:hover h4,
  a:hover h5 {
    color: #4b89b1;
  }
  .button:hover {
    background-color: #4b89b1;
  }
  code,
  pre {
    color: #ddd;
  }
  .main-header {
    background-color: #4b89b1;
  }
}
#hexo-amp-id-1{margin-bottom: 10px; padding-bottom: 100%; position: relative; width: 100%}#hexo-amp-id-2{margin-bottom: 10px; padding-bottom: 74%; position: relative; width: 100%}#hexo-amp-id-3{max-width:100%}
		
		amp-iframe {
			margin-bottom: 10px;
		}
	</style>
  </head>
  <body>

  	<!-- google analytics -->
  	
  	<amp-analytics type="googleanalytics" id="google-analytics">
		<script type="application/json">
		{
		  "vars": {
		    "account": "UA-39254352-1"
		  },
		  "triggers": {
		    "trackPageview": {
		      "on": "visible",
		      "request": "pageview"
		    }
		  }
		}
		</script>
	</amp-analytics>
	

  <header class="main-header">
      <nav id="menu">
          <a href="/">JMPerez Blog</a>
          <a href="/projects/">Projects</a>
          <a href="/talks/">Speaking</a>
          <a href="/about-me/">About</a>
      </nav>
  </header>

  <article>
  	<div class="post">
	  	<div id="page">

		    <article id="post-es/svg-placeholders" class="post wrapper">

        <div class="media author">
          <div class="img">
            <a href="/about-me/">
              <amp-img src="/assets/images/jmperez.jpg" class="avatar-img" alt="" height="53" width="53">
            </a>
          </div>
          <div class="bd">
            <address class="name" itemprop="author" itemscope itemtype="https://schema.org/Person"><a href="/about-me/" itemprop="name">José M. Pérez</a></address>
            <meta class="post-data" itemprop="datePublished" content="2017-10-29T21:30:00.000Z">
              October 29 2017
            </meta>
          </div>
        </div>

				<!-- entry title -->
				<header class="entry-header">
					
					  <h1 class="article-title entry-title" itemprop="name">
					    Usando SVG como placeholders — Más técnicas de carga de imágenes
					  </h1>
					
				</header>

				<!-- entry content -->
			    <div class="entry-content ecp">
			  		<p>Me apasiona la optimizaci&#xF3;n del rendimiento de im&#xE1;genes y hacer que las im&#xE1;genes carguen r&#xE1;pido. Una de las &#xE1;reas de estudio m&#xE1;s interesantes es el placeholder: qu&#xE9; mostrar cuando la imagen todav&#xED;a no se ha cargado.</p><p>Durante los &#xFA;ltimos d&#xED;as me he encontrado con algunas t&#xE9;cnicas de carga que usan SVG, y me gustar&#xED;a describirlas en este post.</p><div class="amp-img-wrapper"><amp-img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1509278557/jmperez-composition-primitive_j8zyfn.jpg" width="700" height="351" layout="responsive"></amp-img></div> <small class="caption">Los SVGs generados a partir de im&#xE1;genes pueden ser usados como placeholders. &#xA1;Sigue leyendo!</small><a id="more"></a><p>En esta publicaci&#xF3;n hablar&#xE9; sobre estos temas:</p><ul><li>Descripci&#xF3;n general de los diferentes tipos de placeholders</li><li>Placeholders basados en SVG (contornos, formas y siluetas)</li><li>Automatizaci&#xF3;n del proceso.</li></ul><h3 id="Descripcion-general-de-los-diferentes-tipos-de-placeholders"><a href="#Descripcion-general-de-los-diferentes-tipos-de-placeholders" class="headerlink" title="Descripci&#xF3;n general de los diferentes tipos de placeholders"></a>Descripci&#xF3;n general de los diferentes tipos de placeholders</h3><p>En el pasado <a href="/lazy-loading-images">he escrito sobre placeholders y lazy-load de im&#xE1;genes</a>, y tambi&#xE9;n <a href="https://www.youtube.com/watch?v=szmVNOnkwoU" target="_blank" rel="noopener">he dado charlas sobre ello</a>. Cuando se hace lazy-load de im&#xE1;genes es conveniente pensar en qu&#xE9; renderizar como placeholder, dado que puede tener un gran impacto en el rendimiento percibido por el usuario. Hace un tiempo describ&#xED; algunas opciones:</p><div class="amp-img-wrapper"><amp-img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale/v1509278557/placeholder-options_vtwp6b.png" width="700" height="359" layout="responsive"></amp-img></div> <small class="caption">Diferentes estrategias para rellenar el &#xE1;rea de una imagen mientras &#xE9;sta carga.</small><ul><li><strong>Mantener el espacio vac&#xED;o para las im&#xE1;genes</strong>: En un mundo de dise&#xF1;o responsive, reservar el &#xE1;rea para la imagen evita que el contenido salte. Los cambios de layout son malos desde el punto de vista de la experiencia de usuario, pero tambi&#xE9;n son nefastos en cuanto al rendimiento. El navegador debe recalcular el layout cada vez que obtiene las dimensiones de una imagen, para dejar espacio para la misma.</li><li><strong>Placeholder</strong>: Imagina que estamos mostrando la imagen de perfil de un usuario. Quiz&#xE1;s queremos mostrar una silueta como imagen de background. Esta imagen se muestra mientras la imagen principal est&#xE1; cargando, pero tambi&#xE9;n si la petici&#xF3;n falla o si el usuario no ha establecido ninguna imagen de perfil. Habitualmente estas im&#xE1;genes son vectoriales, y dado su peque&#xF1;o tama&#xF1;o son excelentes candidatas para ser servidas inline.</li><li><strong>Color s&#xF3;lido</strong>: Podemos tomar un color de la imagen y usarlo como color de fondo en el placeholder. Puede ser el color dominante, el m&#xE1;s vibrante&#x2026; La idea es que est&#xE1; basado o extra&#xED;do de la imagen que se desea cargar, y el resultado deber&#xED;a ayudar a suavizar la transici&#xF3;n entre &#x201C;no imagen&#x201D; e &#x201C;imagen cargada&#x201D;.</li><li><strong>Imagen desenfocada</strong>: Tambi&#xE9;n llamada t&#xE9;cnica <em>blur up</em>. Se renderiza una versi&#xF3;n muy peque&#xF1;a de la imagen y se hace la transici&#xF3;n a la imagen completa. La imagen inicial es peque&#xF1;a tanto en p&#xED;xeles como en kBs. Para eliminar artefactos de compresi&#xF3;n la imagen se ampl&#xED;a y se desenfoca. He escrito previamente sobre este tema en <a href="/medium-image-progressive-loading-placeholder">C&#xF3;mo Medium hacer carga progresiva de im&#xE1;genes</a>, <a href="/webp-placeholder-images">Usando WebP para crear previsualizaciones peque&#xF1;as</a>, y <a href="/more-progressive-image-loading">M&#xE1;s ejemplos de carga progresiva de im&#xE1;genes</a>.</li></ul><p>Resulta que hay muchas otras variaciones y mucha gente inteligente desarrollando otras t&#xE9;cnicas para crear placeholders.</p><p>Una de ellas es generar gradientes o degradados en vez de colores s&#xF3;lidos. Los gradientes pueden crear una previsualizaci&#xF3;n de la imagen final m&#xE1;s precisa, con unos pocos bytes extra.</p><div class="amp-img-wrapper"><amp-img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:684,f_auto,c_scale,w_1368/v1509278575/gradient-background_jyymty.jpg" width="1368" height="904" layout="responsive"></amp-img></div> <small class="caption">Usando gradientes como fondos. Captura de Gradify, que ya no est&#xE1; disponible on-line. El c&#xF3;digo <a href="https://github.com/fraser-hemp/gradify" target="_blank" rel="noopener">est&#xE1; en GitHub</a>.</small><p>Otra t&#xE9;cnica consiste en utilizar SVGs basados en la imagen, que est&#xE1; populariz&#xE1;ndose gracias a algunos hacks y experimentos recientes.</p><h3 id="Placeholders-basados-en-SVG"><a href="#Placeholders-basados-en-SVG" class="headerlink" title="Placeholders basados en SVG"></a>Placeholders basados en SVG</h3><p>Sabemos que los SVGs son ideales para im&#xE1;genes vectoriales. En la mayor&#xED;a de casos queremos cargar una imagen de mapa de bits (JPG, PNG&#x2026;), as&#xED; que la cuesti&#xF3;n es c&#xF3;mo vectorizar la imagen. Podemos utilizar contornos, formas y &#xE1;reas.</p><h4 id="Contornos"><a href="#Contornos" class="headerlink" title="Contornos"></a>Contornos</h4><p>En <a href="/drawing-edges-svg">un post anterior</a> expliqu&#xE9; c&#xF3;mo calcular los contornos de una imagen y animarlos. Mi objetivo inicial era intentar dibujar regiones, vectorizando la imagen, pero no sab&#xED;a c&#xF3;mo hacerlo. Me di cuenta de que usando los contornos tambi&#xE9;n pod&#xED;a ser innovador y decid&#xED; animarlos para crear un efecto de &#x201C;dibujado&#x201D;.</p><div id="hexo-amp-id-1" class="codepen-aspect-ratio"><amp-iframe height="600" sandbox="allow-scripts allow-same-origin allow-popups" layout="fixed-height" frameborder="0" src="https://codepen.io/jmperez/embed/oogqdp?height=600&amp;theme-id=0&amp;slug-hash=oogqdp&amp;default-tab=result"><amp-img layout="fill" src="/amp-dist/sample/sample-placeholder.png" placeholder=""></amp-img></amp-iframe></div><h4 id="Formas"><a href="#Formas" class="headerlink" title="Formas"></a>Formas</h4><p>Tambi&#xE9;n podemos usar SVG para dibujar &#xE1;reas de la imagen en lugar de contornos o bordes. De alguna manera estar&#xED;amos vectorizando una imagen de mapa de bits para crear un placeholder.</p><p>En su d&#xED;a intent&#xE9; hacer algo similar con tri&#xE1;ngulos. Puedes ver el resultado en mis charlas <a href="/cssconfau16/#/45">en CSSConf</a> y <a href="/renderconf17/#/46">Render Conf</a>.</p><div id="hexo-amp-id-2" class="codepen-aspect-ratio"><amp-iframe height="444" sandbox="allow-scripts allow-same-origin allow-popups" layout="fixed-height" frameborder="0" src="https://codepen.io/jmperez/embed/BmaWmQ?height=444&amp;theme-id=0&amp;slug-hash=BmaWmQ&amp;default-tab=result"><amp-img layout="fill" src="/amp-dist/sample/sample-placeholder.png" placeholder=""></amp-img></amp-iframe></div><p>Este codepen es una prueba de concepto de un placeholder basado en SVG compuesto por 245 tri&#xE1;ngulos. La generaci&#xF3;n de los tri&#xE1;ngulos utiliza la <a href="https://es.wikipedia.org/wiki/Triangulaci%C3%B3n_de_Delaunay" target="_blank" rel="noopener">triangulaci&#xF3;n de Delaunay</a> a partir del proyecto <a href="https://github.com/possan/polyserver" target="_blank" rel="noopener">polyserver de Possan</a>. Como es de esperar, a mayor n&#xFA;mero de tri&#xE1;ngulos, mayor es el tama&#xF1;o del fichero resultante.</p><h4 id="Primitive-y-SQIP-una-tecnica-LQIP-basada-en-SVG"><a href="#Primitive-y-SQIP-una-tecnica-LQIP-basada-en-SVG" class="headerlink" title="Primitive y SQIP, una t&#xE9;cnica LQIP basada en SVG"></a>Primitive y SQIP, una t&#xE9;cnica LQIP basada en SVG</h4><p>Tobias Baldauf ha estado trabajando en otra t&#xE9;cnica LQIP (<em>Low-Quality Image Placeholder</em>) usando SVGs llamada <a href="https://github.com/technopagan/sqip" target="_blank" rel="noopener">SQIP</a>. Antes de adentrarnos en SQIP, me gustar&#xED;a describir <a href="https://github.com/fogleman/primitive" target="_blank" rel="noopener">Primitive</a>, una librer&#xED;a que SQIP utiliza internamente.</p><p>Primitive es fascinante y recomiendo definitivamente que le eches un ojo. Convierte una imagen de mapa de bits en un SVG compuesto por formas que se solapan. Su peque&#xF1;o tama&#xF1;o lo hace ideal para incluirlo de forma inline en la p&#xE1;gina. As&#xED; se consigue reducir una petici&#xF3;n, a la vez que se renderiza un placeholder bastante cercano a la imagen final incrustada en el cuerpo del HTML inicial.</p><p>Primitive genera una imagen basada en figuras como tri&#xE1;ngulos, rect&#xE1;ngulos y c&#xED;rculos entre otros. En cada paso a&#xF1;ade una figura. A m&#xE1;s pasos, la imagen resultante se va pareciendo m&#xE1;s a la imagen original. Si el formato de salida elegido es SVG, tambi&#xE9;n significa que el fichero ser&#xE1; m&#xE1;s grande cuantas m&#xE1;s figuras contenga.</p><p>Para comprender c&#xF3;mo funciona Primitive lo ejecut&#xE9; tomando un par de im&#xE1;genes de prueba. Gener&#xE9; SVGs a partir de las im&#xE1;genes usando 10 y 100 tri&#xE1;ngulos:</p><div><div class="amp-img-wrapper"><amp-img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367394/pexels-photo-281184-square-10.svg_ifiu2z.png" width="500" height="500" layout="responsive"></amp-img></div><div class="amp-img-wrapper"><amp-img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367394/pexels-photo-281184-square-100.svg_tkr8el.png" width="500" height="500" layout="responsive"></amp-img></div><div class="amp-img-wrapper"><amp-img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367395/pexels-photo-281184-square_tuhvso.jpg" width="500" height="500" layout="responsive"></amp-img></div></div><p><small class="caption">Procesando <a href="/assets/images/posts/svg-placeholders/pexels-photo-281184-square.jpg">esta imagen</a> con Primitive, usando <a href="/assets/images/posts/svg-placeholders/pexels-photo-281184-square-10.svg">10 tri&#xE1;ngulos</a> y <a href="/assets/images/posts/svg-placeholders/pexels-photo-281184-square-100.svg">100 tri&#xE1;ngulos</a>.</small></p><div><div class="amp-img-wrapper"><amp-img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367394/pexels-photo-618463-square-10.svg_aeonon.png" width="500" height="500" layout="responsive"></amp-img></div><div class="amp-img-wrapper"><amp-img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367394/pexels-photo-618463-square-100.svg_t6pwcv.png" width="500" height="500" layout="responsive"></amp-img></div><div class="amp-img-wrapper"><amp-img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:228,f_auto,c_scale,w_500/v1509367395/pexels-photo-618463-square_pmbi9x.jpg" width="500" height="500" layout="responsive"></amp-img></div></div><p><small class="caption">Procesando <a href="/assets/images/posts/svg-placeholders/pexels-photo-618463-square.jpg">esta imagen</a> con Primitive, usando <a href="/assets/images/posts/svg-placeholders/pexels-photo-618463-square-10.svg">10 tri&#xE1;ngulos</a> y <a href="/assets/images/posts/svg-placeholders/pexels-photo-618463-square-100.svg">100 tri&#xE1;ngulos</a>.</small></p><p>Usando 10 tri&#xE1;ngulos las im&#xE1;genes empiezan a parecerse a la versi&#xF3;n original. Estas im&#xE1;genes SVG pueden ser adecuadas como placeholders. De hecho el c&#xF3;digo del SVG de 10 tri&#xE1;ngulos es muy peque&#xF1;o, unos 1.030 bytes, que pueden reducirse hasta unos 640 bytes si pasamos la salida por SVGO.</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2000/svg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1024<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1024<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#817c70<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M0 0h1024v1024H0z<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span> <span class="token attr-name">fill-opacity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>.502<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#03020f<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M178 994l580 92L402-62<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#f2e2ba<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M638 894L614 6l472 440<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#fff8be<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M-62 854h300L138-62<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#76c2d9<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M410-62L154 530-62 38<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#62b4cf<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M1086-2L498-30l484 508<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#010412<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M430-2l196 52-76 356<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#eb7d3f<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M598 594l488-32-308 520<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#080a18<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M198 418l32 304 116-448<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#3f201d<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M1086 1062l-344-52 248-148<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#ebd29f<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M630 658l-60-372 516 320<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>Las im&#xE1;genes generadas con 100 tri&#xE1;ngulos son m&#xE1;s grandes, en kB, como es de esperar. En esta prueba las im&#xE1;genes ocupan unos 5kB tras aplicar SVGO (8kB antes). Tienen un gran nivel de detalle en un tama&#xF1;o comedido. La decisi&#xF3;n de cu&#xE1;ntos tri&#xE1;ngulos usar depende mucho del tipo de imagen (por ejemplo contraste, cantidad de colores, complejidad de la forma) y el nivel de detalle deseado.</p><p>Ser&#xED;a posible crear un script similar a <a href="https://github.com/technopagan/cjpeg-dssim" target="_blank" rel="noopener">cpeg-dssim</a> que ajusta la cantidad de formas hasta llegar a un umbral de <a href="https://en.wikipedia.org/wiki/Structural_similarity" target="_blank" rel="noopener">similaridad estructural</a>, o un m&#xE1;ximo n&#xFA;mero de formas en el peor caso.</p><p>Los SVGs resultantes son una buena opci&#xF3;n tambi&#xE9;n como im&#xE1;genes de fondo. Dado que son vectoriales y tienen un tama&#xF1;o limitado, son un buen candidato para im&#xE1;genes <em>hero</em> y fondos de gran tama&#xF1;o que de otro modo mostrar&#xED;an artefactos de compresi&#xF3;n.</p><h4 id="SQIP"><a href="#SQIP" class="headerlink" title="SQIP"></a>SQIP</h4><p>En <a href="https://github.com/technopagan/sqip" target="_blank" rel="noopener">palabras de Tobias</a>:</p><blockquote><p>SQIP es un intento de encontrar un balance entre estos dos extremos: hace uso de <a href="https://github.com/fogleman/primitive" target="_blank" rel="noopener">Primitive</a> para generar un SVG consistente en varias formas sencillas que aproximan las principales caracter&#xED;sticas visibles dentro de la imagen, optimiza el SVG utilizando <a href="https://github.com/svg/svgo" target="_blank" rel="noopener">SVGO</a> y le a&#xF1;ade un filtro de desenfoque gaussiano. Esto produce un placeholder SVG que pesa s&#xF3;lo ~800&#x2013;1000 bytes, se ve bien en todas las pantallas y proporciona una pista visual del contenido de la imagen que se va a cargar.</p></blockquote><p>El resultado es similar a utilizar una imagen peque&#xF1;a como placeholder en la t&#xE9;cnica blur-up (lo que <a href="/medium-image-progressive-loading-placeholder">Medium</a> y <a href="/more-progressive-image-loading">otros sitios</a> hacen). La diferencia es que, en lugar de utilizar una imagen bitmap como JPG o WebP, el placeholder usa SVG.</p><p>Si ejecutamos SQIP con las im&#xE1;genes originales obtenemos esto:</p><div><div class="amp-img-wrapper"><amp-img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:342,f_auto,c_scale,w_670/v1509370309/pexels-photo-281184-square-sqip.svg_zspgb0.png" width="670" height="670" layout="responsive"></amp-img></div><div class="amp-img-wrapper"><amp-img src="https://res.cloudinary.com/jmperez/image/upload/w_auto:100:342,f_auto,c_scale,w_670/v1509370308/pexels-photo-618463-square-sqip.svg_qjrexh.png" width="670" height="670" layout="responsive"></amp-img></div></div><p><small class="caption">Las im&#xE1;genes resultantes tras aplicar SQIP sobre <a href="/assets/images/posts/svg-placeholders/pexels-photo-281184-square-sqip.svg">la primera imagen</a> y <a href="/assets/images/posts/svg-placeholders/pexels-photo-618463-square-sqip.svg">la segunda</a>.</small></p><p>El SVG resultante ocupa ~900 bytes. Inspeccionando el c&#xF3;digo podemos observar el filtro <code>feGaussianBlur</code> aplicado al grupo de formas:</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2000/svg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>0 0 2000 2000<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feGaussianBlur</span> <span class="token attr-name">stdDeviation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>12<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#817c70<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M0 0h2000v2000H0z<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span> <span class="token attr-name">filter</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>url(#b)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transform</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>translate(4 4) scale(7.8125)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill-opacity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>.5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ellipse</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#000210<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transform</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>matrix(50.41098 -3.7951 11.14787 148.07886 107 194.6)<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ellipse</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#eee3bb<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transform</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>matrix(-56.38179 17.684 -24.48514 -78.06584 205 110.1)<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ellipse</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#fff4bd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transform</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>matrix(35.40604 -5.49219 14.85017 95.73337 16.4 123.6)<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ellipse</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#79c7db<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>21<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>39<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>65<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>65<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ellipse</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#0c1320<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>117<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>38<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>34<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>47<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ellipse</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#5cb0cd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transform</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>matrix(-39.46201 77.24476 -54.56092 -27.87353 219.2 7.9)<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#e57339<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>M271 159l-123-16 43 128z<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ellipse</span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#47332f<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>214<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>237<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>242<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>19<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</code></pre><p>SQIP tambi&#xE9;n puede imprimir como resultado una etiqueta <code>img</code> con el contenido del SVG codificado en Base 64:</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>640<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>640<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>example.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Add descriptive alt text<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span> <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAw...&lt;stripped base 64&gt;...PjwvZz48L3N2Zz4=)</span><span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><h4 id="Siluetas"><a href="#Siluetas" class="headerlink" title="Siluetas"></a>Siluetas</h4><p>Acabamos de ver c&#xF3;mo usar SVGs para contornos y formas b&#xE1;sicas. Otra posibilidad es vectorizar las im&#xE1;genes &#x201C;traz&#xE1;ndolas&#x201D;. <a href="https://twitter.com/mikaelainalem" target="_blank" rel="noopener">Mikael Ainalem</a> comparti&#xF3; <a href="https://codepen.io/ainalem/full/aLKxjm/" target="_blank" rel="noopener">un codepen</a> hace unos d&#xED;as mostrando c&#xF3;mo usar una silueta con 2 colores como placeholder. El resultado es muy bonito:</p><amp-video id="hexo-amp-id-3" controls width="690" height="459" layout="responsive"><source src="https://res.cloudinary.com/jmperez/video/upload/dpr_auto,f_auto,q_auto,c_scale/v1509278615/silhouette-lazy-loading_evq9xq.mp4" type="video/mp4"></amp-video><p>En este caso los SVGs est&#xE1;n dibujados a mano, pero la t&#xE9;cnica inspir&#xF3; r&#xE1;pidamente a desarrolladores que crearon integraciones con herramientas que automatizaban el proceso.</p><ul><li><a href="https://www.gatsbyjs.org" target="_blank" rel="noopener">Gatsby</a>, un generador de sitios est&#xE1;ticos basado en React, soporta estos SVGs trazados. Utiliza <a href="https://www.npmjs.com/package/potrace" target="_blank" rel="noopener">un port de potrace a JavaScript</a> para vectorizar las im&#xE1;genes.</li></ul><amp-twitter data-tweetid="923304195666485248" width="800" height="600" layout="responsive"></amp-twitter><ul><li><a href="https://craftcms.com" target="_blank" rel="noopener">Craft 3 CMS</a>, que tambi&#xE9;n a&#xF1;adi&#xF3; soporte para siluetas. Utiliza <a href="https://github.com/nystudio107/craft3-imageoptimize/blob/master/src/lib/Potracio.php" target="_blank" rel="noopener">un port de potrace a PHP</a>.</li></ul><amp-twitter data-tweetid="920673966091534338" width="800" height="600" layout="responsive"></amp-twitter><ul><li><a href="https://github.com/EmilTholin/image-trace-loader" target="_blank" rel="noopener">image-trace-loader</a>, un loader de Webpack que utiliza potrace para procesar las im&#xE1;genes.</li></ul><amp-twitter data-tweetid="920423596346019840" width="800" height="600" layout="responsive"></amp-twitter><p>Tambi&#xE9;n es interesante ver una comparaci&#xF3;n de la salida obtenida por el loader de webpack de Emil (basado en potrace) y los SVGs dibujados a mano de Mikael.</p><amp-twitter data-tweetid="920647706799955970" width="800" height="600" layout="responsive"></amp-twitter><p>Asumo que la salida generada por potrace utiliza las opciones por defecto. Adicionalmente, es posible ajustarlas. Lee <a href="https://github.com/EmilTholin/image-trace-loader#options" target="_blank" rel="noopener">las opciones para image-trace-loader</a>, que son pr&#xE1;cticamente <a href="https://www.npmjs.com/package/potrace#parameters" target="_blank" rel="noopener">las que se pasan a potrace</a>.</p><h2 id="Resumen"><a href="#Resumen" class="headerlink" title="Resumen"></a>Resumen</h2><p>Hemos visto diferentes herramientas y t&#xE9;cnicas para generar SVGs basados en im&#xE1;genes bitmap y utilizarlos como placeholders. De la misma forma que <a href="/webp-placeholder-images/">WebP es un formato fant&#xE1;stico para previsualizaciones</a>, SVG es tambi&#xE9;n un formato interesante para aplicar en los placeholders. Podemos controlar el nivel de detalle (y por consiguiente, su tama&#xF1;o), es altamente comprimible y es f&#xE1;cil de manipular con CSS y JS.</p><h2 id="Recursos-extra"><a href="#Recursos-extra" class="headerlink" title="Recursos extra"></a>Recursos extra</h2><p>Este post lleg&#xF3; a <a href="https://news.ycombinator.com/item?id=15696596" target="_blank" rel="noopener">lo alto de Hacker News, consiguiendo muchos puntos y comentarios</a>. Me siento orgulloso por ello, y por todos los enlaces a otros recursos que han sido compartidos en los comentarios de esa p&#xE1;gina. Aqu&#xED; tienes algunos de ellos:</p><ul><li><a href="https://github.com/Tw1ddle/geometrize-haxe" target="_blank" rel="noopener">Geometrize</a> es un port de Primitive escrito en Haxe. Tambi&#xE9;n hay <a href="https://github.com/Tw1ddle/geometrize-haxe-web" target="_blank" rel="noopener">una implementaci&#xF3;n en JavaScript</a> que puedes probar directamente <a href="http://www.samcodes.co.uk/project/geometrize-haxe-web/" target="_blank" rel="noopener">en tu navegador</a>.</li><li><a href="https://github.com/ondras/primitive.js" target="_blank" rel="noopener">Primitive.js</a>, que es un port de Primitive en JavaScript. Tambi&#xE9;n, <a href="https://github.com/cielito-lindo-productions/primitive.nextgen" target="_blank" rel="noopener">primitive.nextgen</a>, que es un port de la aplicaci&#xF3;n de escritorio de Primitive utilizando Primitive.js y Electron.</li><li>Hay un par de cuentas de Twitter donde puedes ver ejemplos de im&#xE1;genes generadas con Primitive y Geometrize: <a href="https://twitter.com/PrimitivePic" target="_blank" rel="noopener">@PrimitivePic</a> y <a href="https://twitter.com/Geometrizer" target="_blank" rel="noopener">@Geometrizer</a>.</li><li><a href="https://github.com/jankovicsandras/imagetracerjs" target="_blank" rel="noopener">imagetracerjs</a>, que es un tracer de im&#xE1;genes r&#xE1;ster y vectorizador escrito en JavaScript. Tambi&#xE9;n hay ports para <a href="https://github.com/jankovicsandras/imagetracerjava" target="_blank" rel="noopener">Java</a> y <a href="https://github.com/jankovicsandras/imagetracerandroid" target="_blank" rel="noopener">Android</a>.</li></ul><h2 id="Posts-relacionados"><a href="#Posts-relacionados" class="headerlink" title="Posts relacionados"></a>Posts relacionados</h2><p>Si te ha gustado este post, echa un vistazo a estos otros en los que he escrito sobre t&#xE9;cnicas para cargar im&#xE1;genes:</p><ul><li><a href="/medium-image-progressive-loading-placeholder">C&#xF3;mo Medium carga im&#xE1;genes de forma progresiva</a></li><li><a href="/webp-placeholder-images">Usando WebP para crear peque&#xF1;as previsualizaciones</a></li><li><a href="/more-progressive-image-loading">M&#xE1;s ejemplos de carga de im&#xE1;genes progresiva</a></li></ul>
			  	</div>

		  	</article>
		</div>
    <footer>
        <section class="links">
            <a href="https://twitter.com/jmperezperez">@jmperezperez</a> on Twitter · <a href="https://github.com/JMPerez">GitHub</a> · <a href="http://www.linkedin.com/in/jmperezperez">LinkedIn</a>
        </section>
    </footer>

	</div>
  </article>

  </body>
</html>
